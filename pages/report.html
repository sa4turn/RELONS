<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buat Laporan - RELONS</title>
    <link rel="stylesheet" href="../style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-logo">
                    <img src="../RELONS.png" alt="RELONS Logo" class="logo">
                    <h1>RELONS</h1>
                </div>
                <ul class="nav-menu">
                    <li><a href="../index.html" class="nav-link">Beranda</a></li>
                    <li><a href="education.html" class="nav-link">Edukasi</a></li>
                    <li><a href="forum.html" class="nav-link">Forum</a></li>
                    <li><a href="report.html" class="nav-link report-btn">Laporkan</a></li>
                    <li><a href="tracking.html" class="nav-link">Tracking</a></li>
                    <li><a href="news.html" class="nav-link">Berita</a></li>
                    <li><a href="contact.html" class="nav-link">Kontak</a></li>
                </ul>
                <div id="userMenu" class="user-menu">
                    <a href="login.html" class="nav-link">
                        <i class="fas fa-sign-in-alt"></i> Masuk
                    </a>
                </div>
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <div class="page-header">
                <h1><i class="fas fa-flag"></i> Buat Laporan Bullying</h1>
                <p>Laporkan kasus bullying dengan aman. Identitas Anda akan dilindungi sesuai pilihan Anda.</p>
            </div>

            <!-- Verification Modal -->
            <div id="verificationModal" class="modal">
                <div class="modal-content">
                    <h2><i class="fas fa-question-circle"></i> Konfirmasi Laporan</h2>
                    <p>Apakah Anda yakin ingin melaporkan kasus ini? Pastikan informasi yang Anda berikan akurat dan dapat dipertanggungjawabkan.</p>
                    <div class="verification-actions">
                        <button class="btn btn-primary" onclick="confirmReport()">Ya, Saya Yakin</button>
                        <button class="btn btn-secondary" onclick="closeModal('verificationModal')">Periksa Kembali</button>
                    </div>
                </div>
            </div>

            <!-- Report Form -->
            <div class="report-container">
                <form id="reportForm" class="report-form">
                    <!-- Reporter Type Selection -->
                    <div class="form-section">
                        <h3><i class="fas fa-user"></i> Tipe Pelapor</h3>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="reporterType" value="victim" required>
                                <span class="radio-custom"></span>
                                <div class="radio-content">
                                    <strong>Korban</strong>
                                    <p>Saya mengalami bullying secara langsung</p>
                                </div>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="reporterType" value="witness" required>
                                <span class="radio-custom"></span>
                                <div class="radio-content">
                                    <strong>Saksi</strong>
                                    <p>Saya menyaksikan kasus bullying</p>
                                </div>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="reporterType" value="friend" required>
                                <span class="radio-custom"></span>
                                <div class="radio-content">
                                    <strong>Teman</strong>
                                    <p>Saya melaporkan atas nama teman</p>
                                </div>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="reporterType" value="parent" required>
                                <span class="radio-custom"></span>
                                <div class="radio-content">
                                    <strong>Orang Tua/Wali</strong>
                                    <p>Saya melaporkan atas nama anak/wali</p>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- Anonymity Selection (hidden for guest users) -->
                    <div class="form-section" id="anonymitySection">
                        <h3><i class="fas fa-mask"></i> Pilihan Identitas</h3>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="anonymity" value="anonymous" required>
                                <span class="radio-custom"></span>
                                <div class="radio-content">
                                    <strong>Anonim</strong>
                                    <p>Identitas saya tidak akan dicantumkan</p>
                                </div>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="anonymity" value="identified" required>
                                <span class="radio-custom"></span>
                                <div class="radio-content">
                                    <strong>Dengan Identitas</strong>
                                    <p>Saya bersedia mencantumkan identitas</p>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- Personal Information (conditional) -->
                    <div class="form-section" id="personalInfoSection" style="display: none;">
                        <h3><i class="fas fa-id-card"></i> Informasi Pribadi</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="reporterName">Nama Lengkap</label>
                                <input type="text" id="reporterName" name="reporterName">
                            </div>
                            <div class="form-group">
                                <label for="reporterEmail">Email</label>
                                <input type="email" id="reporterEmail" name="reporterEmail">
                            </div>
                            <div class="form-group">
                                <label for="reporterNim">NIM</label>
                                <input type="text" id="reporterNim" name="reporterNim">
                            </div>
                            <div class="form-group">
                                <label for="reporterFaculty">Fakultas</label>
                                <select id="reporterFaculty" name="reporterFaculty">
                                    <option value="">Pilih Fakultas</option>
                                    <option value="FTIK">Fakultas Teknik dan Informatika</option>
                                    <option value="FEB">Fakultas Ekonomi dan Bisnis</option>
                                    <option value="FIKOM">Fakultas Ilmu Komunikasi</option>
                                    <option value="FSD">Fakultas Seni dan Desain</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="reporterPhone">Nomor Telepon</label>
                                <input type="tel" id="reporterPhone" name="reporterPhone">
                            </div>
                        </div>
                    </div>

                    <!-- Guest Information Display (for guest users) -->
                    <div class="form-section" id="guestInfoSection" style="display: none;">
                        <h3><i class="fas fa-user-secret"></i> Informasi Guest</h3>
                        <div class="guest-info-display">
                            <p><strong>Nama:</strong> <span id="guestDisplayName">-</span></p>
                            <p><strong>Email:</strong> <span id="guestDisplayEmail">-</span></p>
                            <p><strong>Telepon:</strong> <span id="guestDisplayPhone">-</span></p>
                            <p><strong>Status:</strong> <span id="guestDisplayRole">-</span></p>
                            <p><strong>Institusi:</strong> <span id="guestDisplayInstitution">-</span></p>
                        </div>
                        <div class="guest-info-note">
                            <i class="fas fa-info-circle"></i>
                            <small>Data di atas akan digunakan untuk keperluan verifikasi dan tindak lanjut laporan, namun tetap dijaga kerahasiaannya.</small>
                        </div>
                    </div>

                    <!-- Bullying Category -->
                    <div class="form-section">
                        <h3><i class="fas fa-tags"></i> Kategori Bullying</h3>
                        <div class="form-group">
                            <select name="bullyingCategory" required>
                                <option value="">Pilih Kategori Bullying</option>
                                <option value="verbal">Bullying Verbal (kata-kata kasar, ejekan)</option>
                                <option value="physical">Bullying Fisik (kekerasan fisik)</option>
                                <option value="social">Bullying Sosial (pengucilan, penyebaran rumor)</option>
                                <option value="cyber">Cyberbullying (online harassment)</option>
                                <option value="sexual">Bullying Seksual (pelecehan seksual)</option>
                                <option value="academic">Bullying Akademik (tekanan berlebihan)</option>
                                <option value="other">Lainnya</option>
                            </select>
                        </div>
                    </div>

                    <!-- Incident Details -->
                    <div class="form-section">
                        <h3><i class="fas fa-info-circle"></i> Detail Kejadian</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="incidentDate">Tanggal Kejadian</label>
                                <input type="date" id="incidentDate" name="incidentDate" required>
                            </div>
                            <div class="form-group">
                                <label for="incidentTime">Waktu Kejadian</label>
                                <input type="time" id="incidentTime" name="incidentTime" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="incidentLocation">Lokasi Kejadian</label>
                            <input type="text" id="incidentLocation" name="incidentLocation" placeholder="Contoh: Gedung A Lantai 2, Kantin, Perpustakaan" required>
                        </div>
                        <div class="form-group">
                            <label for="incidentDescription">Deskripsi Kejadian</label>
                            <textarea id="incidentDescription" name="incidentDescription" rows="6" placeholder="Ceritakan secara detail apa yang terjadi..." required></textarea>
                        </div>
                    </div>

                    <!-- Perpetrator Information -->
                    <div class="form-section">
                        <h3><i class="fas fa-user-times"></i> Informasi Pelaku</h3>
                        <div class="form-group">
                            <label for="perpetratorName">Nama Pelaku (jika diketahui)</label>
                            <input type="text" id="perpetratorName" name="perpetratorName" placeholder="Nama lengkap atau nama panggilan">
                        </div>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="perpetratorNim">NIM Pelaku (jika diketahui)</label>
                                <input type="text" id="perpetratorNim" name="perpetratorNim">
                            </div>
                            <div class="form-group">
                                <label for="perpetratorFaculty">Fakultas Pelaku (jika diketahui)</label>
                                <select id="perpetratorFaculty" name="perpetratorFaculty">
                                    <option value="">Pilih Fakultas</option>
                                    <option value="FTIK">Fakultas Teknik dan Informatika</option>
                                    <option value="FEB">Fakultas Ekonomi dan Bisnis</option>
                                    <option value="FIKOM">Fakultas Ilmu Komunikasi</option>
                                    <option value="FSD">Fakultas Seni dan Desain</option>
                                    <option value="unknown">Tidak Diketahui</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="perpetratorDescription">Deskripsi Pelaku</label>
                            <textarea id="perpetratorDescription" name="perpetratorDescription" rows="3" placeholder="Ciri-ciri fisik, tingkah laku, atau informasi lain yang dapat membantu identifikasi"></textarea>
                        </div>
                    </div>

                    <!-- Evidence Upload -->
                    <div class="form-section">
                        <h3><i class="fas fa-camera"></i> Upload Bukti</h3>
                        <div class="upload-area" id="uploadArea">
                            <div class="upload-content">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p>Drag & drop file di sini atau klik untuk memilih</p>
                                <p class="upload-info">Maksimal 10MB per file. Format: JPG, PNG, GIF, MP4, AVI</p>
                            </div>
                            <input type="file" id="evidenceFiles" name="evidenceFiles" multiple accept="image/*,video/*" style="display: none;">
                        </div>
                        <div id="filePreview" class="file-preview"></div>
                    </div>

                    <!-- Witnesses -->
                    <div class="form-section">
                        <h3><i class="fas fa-eye"></i> Saksi (Opsional)</h3>
                        <div class="form-group">
                            <label for="witnesses">Nama Saksi</label>
                            <textarea id="witnesses" name="witnesses" rows="3" placeholder="Sebutkan nama-nama saksi yang melihat kejadian (jika ada)"></textarea>
                        </div>
                    </div>

                    <!-- Additional Information -->
                    <div class="form-section">
                        <h3><i class="fas fa-plus-circle"></i> Informasi Tambahan</h3>
                        <div class="form-group">
                            <label for="additionalInfo">Informasi Tambahan</label>
                            <textarea id="additionalInfo" name="additionalInfo" rows="4" placeholder="Informasi lain yang mungkin penting untuk penanganan kasus ini"></textarea>
                        </div>
                        <div class="checkbox-group">
                            <label class="checkbox-option">
                                <input type="checkbox" name="urgentCase">
                                <span class="checkbox-custom"></span>
                                <strong>Kasus Mendesak</strong> - Memerlukan penanganan segera
                            </label>
                            <label class="checkbox-option">
                                <input type="checkbox" name="ongoingCase">
                                <span class="checkbox-custom"></span>
                                <strong>Kasus Berkelanjutan</strong> - Bullying terjadi berulang kali
                            </label>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="window.history.back()">
                            <i class="fas fa-arrow-left"></i> Kembali
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i> Kirim Laporan
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>RELONS</h3>
                    <p>Sistem pelaporan bullying yang aman dan terpercaya untuk komunitas UMN.</p>
                </div>
                <div class="footer-section">
                    <h4>Kontak Darurat</h4>
                    <p><i class="fas fa-phone"></i> +62 21 5422 0808</p>
                    <p><i class="fas fa-envelope"></i> <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="50232520203f22241022353c3f3e237e253d3e7e31337e3934">[email&#160;protected]</a></p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 RELONS - Universitas Multimedia Nusantara. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="../js/auth.js"></script>
    <script src="../script.js"></script>
    <script>
        // Check authentication before allowing access to report page
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is authenticated (including guest)
            const currentUser = localStorage.getItem('currentUser');
            if (!currentUser) {
                RELONS.showAlert('Silakan login terlebih dahulu untuk membuat laporan.', 'warning');
                setTimeout(() => {
                    window.location.href = 'login.html';
                }, 2000);
                return;
            }
            
            // Initialize report form if user is authenticated
            initializeReportForm();
        });

        function initializeReportForm() {
            const form = document.getElementById('reportForm');
            const anonymityRadios = document.querySelectorAll('input[name="anonymity"]');
            const personalInfoSection = document.getElementById('personalInfoSection');
            const guestInfoSection = document.getElementById('guestInfoSection');
            const anonymitySection = document.getElementById('anonymitySection');
            const uploadArea = document.getElementById('uploadArea');
            const fileInput = document.getElementById('evidenceFiles');
            const filePreview = document.getElementById('filePreview');

            // Get current user info
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            // Handle guest users - automatically set to anonymous and show guest info
            if (currentUser.isGuest && currentUser.hasPersonalData) {
                anonymitySection.style.display = 'none';
                guestInfoSection.style.display = 'block';
                
                // Display guest information
                document.getElementById('guestDisplayName').textContent = currentUser.name || '-';
                document.getElementById('guestDisplayEmail').textContent = currentUser.email || '-';
                document.getElementById('guestDisplayPhone').textContent = currentUser.phone || '-';
                
                // Map guest role to display text
                const roleMap = {
                    'mahasiswa_non_umn': 'Mahasiswa Non-UMN',
                    'dosen': 'Dosen/Staff',
                    'orang_tua': 'Orang Tua/Wali',
                    'masyarakat': 'Masyarakat Umum',
                    'alumni': 'Alumni UMN'
                };
                document.getElementById('guestDisplayRole').textContent = roleMap[currentUser.guestRole] || currentUser.guestRole || '-';
                document.getElementById('guestDisplayInstitution').textContent = currentUser.institution || 'Tidak disebutkan';
                
                // Create hidden input for anonymity
                const hiddenAnonymity = document.createElement('input');
                hiddenAnonymity.type = 'hidden';
                hiddenAnonymity.name = 'anonymity';
                hiddenAnonymity.value = 'anonymous';
                form.appendChild(hiddenAnonymity);
            } else if (currentUser.isGuest) {
                // Guest without personal data - redirect to login to fill data
                RELONS.showAlert('Silakan isi data diri terlebih dahulu untuk melaporkan sebagai guest.', 'warning');
                setTimeout(() => {
                    window.location.href = 'login.html';
                }, 2000);
                return;
            } else {
                // Handle anonymity selection for registered users
                anonymityRadios.forEach(radio => {
                    radio.addEventListener('change', function() {
                        if (this.value === 'identified') {
                            personalInfoSection.style.display = 'block';
                            makeFieldsRequired(personalInfoSection, true);
                            
                            // Auto-fill student information if user is a student
                            if (currentUser.role === 'student') {
                                document.getElementById('reporterName').value = currentUser.name || '';
                                document.getElementById('reporterEmail').value = currentUser.email || '';
                                document.getElementById('reporterNim').value = currentUser.studentId || '';
                                
                                // Make these fields readonly for students
                                document.getElementById('reporterName').readOnly = true;
                                document.getElementById('reporterEmail').readOnly = true;
                                document.getElementById('reporterNim').readOnly = true;
                            }
                        } else {
                            personalInfoSection.style.display = 'none';
                            makeFieldsRequired(personalInfoSection, false);
                            
                            // Clear and reset readonly status
                            const inputs = personalInfoSection.querySelectorAll('input');
                            inputs.forEach(input => {
                                input.value = '';
                                input.readOnly = false;
                            });
                        }
                    });
                });
            }

            // File upload handling
            uploadArea.addEventListener('click', () => fileInput.click());
            uploadArea.addEventListener('dragover', handleDragOver);
            uploadArea.addEventListener('drop', handleDrop);
            fileInput.addEventListener('change', handleFileSelect);

            // Form submission
            form.addEventListener('submit', handleFormSubmit);
        }

        function makeFieldsRequired(section, required) {
            const inputs = section.querySelectorAll('input, select');
            inputs.forEach(input => {
                if (required) {
                    input.setAttribute('required', 'required');
                } else {
                    input.removeAttribute('required');
                }
            });
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('drag-over');
            const files = e.dataTransfer.files;
            processFiles(files);
        }

        function handleFileSelect(e) {
            const files = e.target.files;
            processFiles(files);
        }

        function processFiles(files) {
            const filePreview = document.getElementById('filePreview');
            
            Array.from(files).forEach(file => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <div class="file-info">
                        <i class="fas ${file.type.startsWith('image/') ? 'fa-image' : 'fa-video'}"></i>
                        <span>${file.name}</span>
                        <span class="file-size">${(file.size / 1024 / 1024).toFixed(2)} MB</span>
                    </div>
                    <button type="button" class="remove-file" onclick="this.parentElement.remove()">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                filePreview.appendChild(fileItem);
            });
        }

        function handleFormSubmit(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const reportData = Object.fromEntries(formData.entries());
            
            // Validation
            const errors = validateReportForm(reportData);
            if (errors.length > 0) {
                RELONS.showAlert('Mohon lengkapi: ' + errors.join(', '), 'error');
                return;
            }

            // Show verification modal
            document.getElementById('verificationModal').style.display = 'block';
            
            // Store form data temporarily
            window.tempReportData = reportData;
        }

        function validateReportForm(data) {
            const errors = [];
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            if (!data.reporterType) errors.push('Tipe pelapor');
            if (!currentUser.isGuest && !data.anonymity) errors.push('Pilihan identitas');
            if (!data.bullyingCategory) errors.push('Kategori bullying');
            if (!data.incidentDate) errors.push('Tanggal kejadian');
            if (!data.incidentTime) errors.push('Waktu kejadian');
            if (!data.incidentLocation) errors.push('Lokasi kejadian');
            if (!data.incidentDescription || data.incidentDescription.length < 20) {
                errors.push('Deskripsi kejadian (minimal 20 karakter)');
            }
            
            if (!currentUser.isGuest && data.anonymity === 'identified') {
                if (!data.reporterName) errors.push('Nama pelapor');
                if (!data.reporterEmail) errors.push('Email pelapor');
                if (currentUser.role === 'student' && !data.reporterNim) errors.push('NIM pelapor');
            }
            
            return errors;
        }

        function confirmReport() {
            const reportData = window.tempReportData;
            
            // Generate report ID
            const reportId = RELONS.generateId();
            
            // Get current user info
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            // Create report object
            const report = {
                id: reportId,
                ...reportData,
                submittedBy: currentUser.id,
                submitterType: currentUser.isGuest ? 'guest' : currentUser.role,
                anonymity: currentUser.isGuest ? 'anonymous' : reportData.anonymity,
                guestData: currentUser.isGuest ? {
                    name: currentUser.name,
                    email: currentUser.email,
                    phone: currentUser.phone,
                    role: currentUser.guestRole,
                    institution: currentUser.institution
                } : null,
                status: 'submitted',
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString(),
                timeline: [{
                    status: 'submitted',
                    message: 'Laporan berhasil dikirim',
                    timestamp: new Date().toISOString()
                }]
            };
            
            // Save to localStorage
            RELONS.saveToLocalStorage('reports', report);
            
            // Close modal
            RELONS.closeModal('verificationModal');
            
            // Show success message
            RELONS.showAlert('Laporan berhasil dikirim! ID Laporan: ' + reportId, 'success');
            
            // Redirect to tracking page after delay
            setTimeout(() => {
                window.location.href = 'tracking.html?id=' + reportId;
            }, 2000);
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
            }
        }
    </script>

    <style>
        .main-content {
            padding: 120px 0 80px;
            min-height: 100vh;
        }

        .page-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .page-header h1 {
            font-size: 2.5rem;
            color: var(--text-dark);
            margin-bottom: 1rem;
        }

        .page-header p {
            font-size: 1.1rem;
            color: var(--text-light);
        }

        .report-container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--white);
            border-radius: 16px;
            box-shadow: var(--shadow-lg);
            overflow: hidden;
        }

        .report-form {
            padding: 2rem;
        }

        .form-section {
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .form-section:last-of-type {
            border-bottom: none;
            margin-bottom: 2rem;
        }

        .form-section h3 {
            font-size: 1.25rem;
            color: var(--text-dark);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .radio-group {
            display: grid;
            gap: 1rem;
        }

        .radio-option {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 1rem;
            border: 2px solid #e5e7eb;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
        }

        .radio-option:hover {
            border-color: var(--primary-color);
            background-color: var(--bg-light);
        }

        .radio-option input[type="radio"] {
            display: none;
        }

        .radio-option input[type="radio"]:checked + .radio-custom {
            background: var(--primary-color);
            border-color: var(--primary-color);
        }

        .radio-option input[type="radio"]:checked + .radio-custom::after {
            display: block;
        }

        .radio-custom {
            width: 20px;
            height: 20px;
            border: 2px solid #d1d5db;
            border-radius: 50%;
            position: relative;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .radio-custom::after {
            content: '';
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
        }

        .radio-content strong {
            display: block;
            color: var(--text-dark);
            margin-bottom: 0.25rem;
        }

        .radio-content p {
            color: var(--text-light);
            font-size: 0.9rem;
            margin: 0;
        }

        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 1rem;
        }

        .checkbox-option {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
        }

        .checkbox-option input[type="checkbox"] {
            display: none;
        }

        .checkbox-custom {
            width: 20px;
            height: 20px;
            border: 2px solid #d1d5db;
            border-radius: 4px;
            position: relative;
            flex-shrink: 0;
        }

        .checkbox-option input[type="checkbox"]:checked + .checkbox-custom {
            background: var(--primary-color);
            border-color: var(--primary-color);
        }

        .checkbox-option input[type="checkbox"]:checked + .checkbox-custom::after {
            content: '✓';
            color: white;
            font-size: 14px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .upload-area {
            border: 2px dashed #d1d5db;
            border-radius: var(--border-radius);
            padding: 3rem 2rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .upload-area:hover,
        .upload-area.drag-over {
            border-color: var(--primary-color);
            background-color: var(--bg-light);
        }

        .upload-content i {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .upload-content p {
            margin-bottom: 0.5rem;
            color: var(--text-dark);
        }

        .upload-info {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .file-preview {
            margin-top: 1rem;
            display: grid;
            gap: 0.5rem;
        }

        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem;
            background: var(--bg-light);
            border-radius: var(--border-radius);
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .file-info i {
            color: var(--primary-color);
        }

        .file-size {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .remove-file {
            background: var(--accent-color);
            color: white;
            border: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: space-between;
            padding-top: 2rem;
            border-top: 1px solid #e5e7eb;
        }

        .verification-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border-radius: 8px;
            width: 80%;
            max-width: 500px;
            text-align: center;
        }

        /* Guest info styles */
        .guest-info-display {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .guest-info-display p {
            margin: 0.5rem 0;
            display: flex;
            justify-content: space-between;
        }

        .guest-info-note {
            background: #fefce8;
            border: 1px solid #facc15;
            border-radius: 8px;
            padding: 0.75rem;
            display: flex;
            align-items: flex-start;
            gap: 8px;
            font-size: 0.9rem;
            color: #92400e;
        }

        .guest-info-note i {
            color: #facc15;
            margin-top: 2px;
        }

        /* Style for readonly fields */
        input[readonly] {
            background-color: #f9fafb;
            color: #6b7280;
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .form-actions {
                flex-direction: column;
            }
            
            .verification-actions {
                flex-direction: column;
            }
        }
    </style>
</body>
</html>